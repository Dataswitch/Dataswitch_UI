<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Switch</title>

    <!-- datatable css -->
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/select/1.3.1/css/select.dataTables.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="../assets/css/common.css">
    <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body class="pageid-02">
    <header>
        <!-- main nav -->
        <nav class="navbar navbar-expand-sm p-0 bg-white">
            <div class="container">
                <!-- Brand/logo -->
                <a class="navbar-brand" href="/">
                    <img class="mw-120" src="../assets/images/Logo 2a.png" alt="Logo">
                </a>
                <!-- Links -->
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                                aria-haspopup="true" aria-expanded="false">Migrate</a>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="./metadatacatalouge.html">Data Catalog</a>
                                <a class="dropdown-item" href="./schemamigrator.html">Schema Migrator</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../integrate.html">Integrate</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../democratize.html">Democratize</a>
                        </li>
                        <li class="nav-item d-flex align-items-center lh-2">
                            <a class="nav-link btn btn-green" href="../signin.html">LogOut</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <section>
        <div class="container">
            <!-- links history label -->
            <nav aria-label="breadcrumb" class="pt-3">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="../migrate.html">Migrate</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Data Catalogue</li>
                </ol>
            </nav>
        </div>
    </section>
    <section class="pt-3 pb-3  min-vh-100">
        <div class="container">
            <!-- Below is the start of the main section -->
            <div class="items-box border">

                <div class="control_button d-flex">
                    <div class="header-btns mr-8">
                        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group mr-2" role="group" aria-label="First group">
                                <button type="button" class="btn btn-light border addBtn">+</button>
                            </div>
                            <div class="btn-group mr-2" role="group" aria-label="Second group">
                                <button type="button" class="btn border btn-info editBtn" disabled data-toggle="modal"
                                    data-target="#editModal">
                                    Edit
                                </button>
                            </div>
                            <div class="btn-group" role="group" aria-label="Third group">
                                <button type="button" class="btn btn-light border btnDelete">-</button>
                            </div>
                        </div>
                    </div>

                    <div class="header-btns">
                        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group mr-2" role="group" aria-label="Default group">
                                <button type="button" class="btn btn-secondary nobtn" disabled>Import</button>
                            </div>
                            <div class="btn-group mr-2" role="group" aria-label="First group">
                                <button type="button" class="btn btn-light border">DB</button>
                            </div>
                            <div class="btn-group mr-2" role="group" aria-label="Second group">
                                <button type="button" class="btn btn-light border">DDL</button>
                            </div>
                            <div class="btn-group mr-2" role="group" aria-label="Third group">
                                <button type="button" class="btn btn-light border">FlatFile</button>
                            </div>
                            <div class="btn-group" role="group" aria-label="Fourth group">
                                <button type="button" class="btn btn-light border">MetaData File</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- modal for edit -->

                <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="editModalLabel">Edit Row</h5>
                                <button type="button" class="close closeBtn" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row table-data">
                                </div>


                                <div class="table-responsive">
                                    <table class="editModalTable table table-striped table-green">
                                        <thead>
                                            <tr></tr>
                                        </thead>
                                        <tbody>
                                            <tr></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary closeBtn"
                                    data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary-green saveEditModal">Save</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="emptyspace_20"></div>
                <div class="table-responsive">
                    <table id="example" class="display table table-bordered table-striped table-green"
                        style="width:100%">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Name</th>
                                <th>Position</th>
                                <th>Office</th>
                                <th>Extn</th>
                                <th>Start date</th>
                                <th>Salary</th>
                            </tr>
                        </thead>
                    </table>
                </div>

                <!-- another table to manipulate -->
                <table id="addRowTable" style="display: none;">
                    <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </section>

    <section>
        <div class="pt-3 pb-3 container">
            <!-- temporary links -->
            <ul class="navbar-nav d-flex flex-row">
                <li class="nav-item mr-3">
                    <a class="nav-link" href="./metadatacatalouge/entity.html">Entity</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./metadatacatalouge/attributes.html">Attributes</a>
                </li>
            </ul>
        </div>
    </section>

    <!-- scripts -->
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script> -->
    <script src="../../assets/lib/datatable/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
    <script src="../../assets/lib/datatable/dataTables.checkboxes.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
    <script src="https://editor.datatables.net/extensions/Editor/js/dataTables.editor.min.js"></script>

    <script>
        jQuery(function ($) {
            $(document).ready(function () {
                var table = $('#example').DataTable({
                    'ajax': 'https://gyrocode.github.io/files/jquery-datatables/arrays_id.json',
                    fixedHeader: true,
                    scrollY: 325,
                    deferRender: true,
                    scroller: true,
                    responsive: true,
                    'columnDefs': [{
                        'targets': 0,
                        'checkboxes': {
                            'selectRow': true,
                            'selectAllRender': '<div class="checkbox"><input type="checkbox" class="dt-checkboxes"><label></label></div>'
                        }
                    }],
                    'select': {
                        'style': 'multi'
                    },
                    'order': [[1, 'asc']]
                });

                // delete row
                $('#example tbody').on('click', 'tr', function () {
                    // single row
                    // if ($(this).hasClass('selected')) {
                    //     $(this).removeClass('selected');
                    // }
                    // else {
                    //     table.$('tr.selected').removeClass('selected');
                    //     $(this).addClass('selected');
                    // }
                    $(this).toggleClass('selected');
                });


                $('.btnDelete').click(function () {
                    table.rows('.selected').remove().draw();
                    $('.editBtn').attr('disabled', true);
                });

                // edit row

                $('.dataTable').on('click', 'tr', 'input:checkbox', function () {
                    let x = $('table tbody tr.selected').length;
                    console.log(x)
                    if (x == 1) {
                        $('.editBtn').attr('disabled', false);
                    } else {
                        $('.editBtn').attr('disabled', true);
                    }
                });


                $('.editBtn').click(function () {
                    console.log('edit');

                    // clear existing data
                    $('.editModalTable  thead tr th').remove()
                    $('.editModalTable  tbody tr td').remove()

                    let tds = $('#example tbody tr.selected').find("td").not(':first');
                    let ths = $('#example thead th').not(':first').find(" div");

                    console.log(tds)

                    // editModal

                    $.each(ths, function (i, el) {
                        console.log(el.innerHTML);
                        $('#editModal').find('.editModalTable thead tr').append("<th>" + el.innerHTML + "</th>")
                        // $('#editModal').find('.table-data').append("<div class='col'>" + el.innerHTML + "</div>")
                    });

                    $.each(tds, function (i, el) {
                        console.log(el.innerHTML);
                        // $('#editModal').find('.editModalTable tbody tr').append("<td>"+el.innerHTML+ "</td>")
                        $('#editModal').find('.editModalTable tbody tr').append(`<td><input type='text' value='${el.innerHTML}'/></td>`)
                        // $(this).html("").append("<input type='text' value=\"" + txt + "\">");
                    });

                    $('#editModal').modal('handleUpdate')

                });

                // save edit modal
                $('.saveEditModal').click(function () {

                    var tds = $('#example tbody tr.selected').find("td").not(':first');
                    let iptds = $('.editModalTable tbody tr td input');

                    $.each(tds, function (i, el) {
                        let text = iptds[i].value;
                        $(this).html(text)
                    });

                    // $.each(iptds, function (i, el) {
                    //     let txt = el.value;
                    //     tds[i].outerText = txt;
                    // });
                });

                // general
                $("#example").on('mousedown', "input", function (e) {
                    e.stopPropagation();
                });

                // add row
                $('.addBtn').click(function () {
                    var rowHtml = $("#addRowTable").find("tbody tr")[0].outerHTML
                    table.row.add($(rowHtml)).draw();
                    // $('#example').DataTable().ajax.reload();
                });


                // var rows = table.rows('.selected');
                // rows.delete({
                //     title: 'Delete ' + rows.count() + ' rows'
                // });


                // add class checkbox option 1
                // $('.editBtn').on('click', () => {
                //     $('table').addClass('showCheckBox');
                // })
                // // remove class checkbox
                // $('.closeBtn').on('click', () => {
                //     $('table').removeClass('showCheckBox');
                //     $('.hasCheckbox input').prop('checked', false)
                // })

                // add class checkbox option 2
                // $('.editBtn').on('click', () => {
                //     $('.editBtn').toggleClass('active');
                //     $('table').toggleClass('showCheckBox');
                // })
                // // remove class checkbox
                // $('.closeBtn').on('click', () => {
                //     $('.hasCheckbox input').prop('checked', false)
                // })

            });
        });

    </script>
</body>

</html>